<!DOCTYPE html>
<html lang="en">
<head>
    <script>
    function start() {
        let xhr = new XMLHttpRequest();
        // let sut_url = document.getElementById('SUT_URL');
        let sut_url = "http://pet-clinic:8080";
        xhr.open("POST", "http://localhost:9002/v1/start", true);
        xhr.setRequestHeader("Content-Type", "application/json");

        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
               var json = JSON.parse(xhr.responseText);
               console.log(json.email + ", " + json.password);
            }
        };
        var data = JSON.stringify({"SUT_URL": sut_url});
        console.log("Starting AGENT with a sut_url of " + sut_url);
        console.log("JSON payload is: " + data);
        console.log("Post response is: " + xhr.send(data));
    }

    function stop() {
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "http://localhost:9002/v1/stop", true);
        xhr.setRequestHeader("Content-Type", "application/json");

        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
               var json = JSON.parse(xhr.responseText);
               console.log(json.email + ", " + json.password);
            }
        };
        var data = JSON.stringify({});
        console.log("Stopping Agent");
        console.log("JSON payload is: " + data);
        xhr.send(data);
    }
    </script>

    <style type="text/css">
        #vnc_frame {
            position: relative;
            width: 100%;
            height: 800px }
        #flower_frame {
            position: relative;
            width: 100%;
            height: 400px  }
    </style>
    <meta charset="UTF-8">
    <title>Agent</title>
</head>
<body>

<form>
    <label for="SUT_URL">System Under Test URL</label>
    <input id='SUT_URL' value="http://pet-clinic:8080">
    <button onclick="start()">Start</button>
    <button onclick="stop()">Stop</button>
</form>

<iframe src="http://localhost:8001/vnc.html" id="vnc_frame" scrolling="no" frameborder="0"></iframe>

<iframe src="http://localhost:5555" id="flower_frame" scrolling="no" frameborder="0"></iframe>

</body>
</html>